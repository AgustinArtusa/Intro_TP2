<!DOCTYPE html>
<html>
    <head>
        <title>Lista de tiendas</title>
        <meta charset="UTF-8">
        <meta name="description" content="My firts HTML">
        <meta name="keywords" content="HTML, CSS, JavaScript">
        <meta name="author" content="John Doe">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.2/css/bulma.min.css">
    </head>

    <body>

      <div class="container is-fluid">
          <nav class="navbar" role="navigation" aria-label="main navigation">
              <div class="navbar-brand">
                  <a class="navbar-item" href="index.html">
                    Tienda
                  </a>
              
                  <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample">
                    <span aria-hidden="true"></span>
                    <span aria-hidden="true"></span>
                    <span aria-hidden="true"></span>
                    <span aria-hidden="true"></span>
                  </a>
              </div>
              
              <div id="navbarBasicExample" class="navbar-menu">
                  <div class="navbar-start">
                    <a class="navbar-item" href="usuarios.html">
                      Usuarios
                    </a>
              

              
                  <div class="navbar-end">
                    <div class="navbar-item">
                      <div class="buttons">
                        <a class="button is-primary" href="modificar.html">
                          <strong>Actualizar Usuario</strong>
                        </a>

                      </div>
                    </div>
                  </div>
              </div>

          </nav>
          <h1>TIENDAS</h1>
          <table class="table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Ubicacion</th>
                <th>Horario</th>
                <th>Estado</th>
                <th>Telefono</th>
                <th>Email contacto</th>
              </tr>
            </thead>

            <tbody id="users-data">
  

            </tbody>
            
          </table>
      </div>

    </body>

    <script>
        fetch('http://localhost:3000/api/v1/tiendas')
        .then(response => response.json())
        .then(tiendas => {
          console.log(tiendas);

          let table = document.getElementById('users-data');
          tiendas.forEach(tienda => {
          let tr = document.createElement('tr');
          tr.id = 'tienda-' + tienda.id;
          let id = document.createElement('th');
          const link = document.createElement('a')
          link.href = `/modificar-tienda?id=${tienda.id}`;
          link.textContent = tienda.id
          id.appendChild(link);

          let ubicacion = document.createElement('td');
          ubicacion.textContent = tienda.ubicacion;
          let horario = document.createElement('td');
          horario.textContent = tienda.horario;
          let estado = document.createElement('td');
          estado.textContent = tienda.estado;
          let telefono = document.createElement('td');
          telefono.textContent = tienda.telefono;
          let email_contacto = document.createElement('td');
          email_contacto.textContent = tienda.email_contacto;

          let actualizar = document.createElement('td');
          let button = document.createElement('button');
          button.textContent = 'Actualizar';
          button.className = 'button has-text-info is-small';
              
          button.addEventListener("click", function() {
            //console.log(`/modificar.html?id=${usuario.id}`);
            window.location.href = `modificar-tienda.html?id=${tienda.id}`; 
          });
              
          let borrar = document.createElement('td');
          let boton = document.createElement('button');
          boton.textContent = 'Borrar';
          boton.className = 'button is-danger is-small';
          boton.onclick = function() { deleteCharacter(tienda.id);};
          borrar.appendChild(boton);
              
          tr.appendChild(id);
          tr.appendChild(ubicacion);
          tr.appendChild(horario);
          tr.appendChild(estado);
          tr.appendChild(telefono);
          tr.appendChild(email_contacto);
          table.appendChild(tr);
              
          actualizar.appendChild(button);
          tr.appendChild(borrar);
          tr.appendChild(actualizar);
          });
        });

  </script>

</html>